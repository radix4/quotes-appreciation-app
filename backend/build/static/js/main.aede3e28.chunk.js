(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n(17),s=n.n(c),o=n(16),u=n(8),i=n(6),l=n.n(i),j=n(7),b=n(9),d=n(76),h=n(77),O=n(38),p=n(78),f=n(82),x=n(79),m=n.p+"static/media/registration.40b72526.png",g=n(15),v=n.n(g),w="/api/users",y=null,k=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(w,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={create:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:y}},e.next=3,v.a.post(w,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){y="bearer ".concat(e)},get:k},S=n(81),N=function(e){var t=e.message;return null===t?null:"Yay, account successfully created!"===t?Object(r.jsx)(S.a,{variant:"success",children:t}):Object(r.jsx)(S.a,{variant:"danger",children:t})},I=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),u=Object(b.a)(s,2),i=u[0],g=u[1],v=Object(a.useState)(null),w=Object(b.a)(v,2),y=w[0],k=w[1],S=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:n,password:i},e.prev=2,e.next=5,C.create(r).then((function(e){console.log("create user success!")}));case 5:k("Yay, account successfully created!"),setTimeout((function(){k(null)}),5e3),c(""),g(""),document.getElementById("create-user-form").reset(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),k("Oh no, do not leave it blank!"),setTimeout((function(){k(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(d.a,{style:{backgroundColor:"#F0F8FF"},fluid:!0,children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(O.a,{className:"left-col",children:Object(r.jsx)(p.a,{className:"background-img",src:m})}),Object(r.jsx)(O.a,{children:Object(r.jsxs)(h.a,{style:{padding:"30%"},children:[Object(r.jsx)(N,{message:y}),Object(r.jsx)("h2",{children:"Registration"}),Object(r.jsxs)(f.a,{id:"create-user-form",onSubmit:S,children:[Object(r.jsxs)(f.a.Group,{as:h.a,controlId:"userName",onChange:function(e){c(e.target.value)},children:[Object(r.jsx)(f.a.Label,{column:!0,md:4,children:"Username"}),Object(r.jsx)(O.a,{md:8,children:Object(r.jsx)(f.a.Control,{type:"text",placeholder:"Username"})})]}),Object(r.jsxs)(f.a.Group,{as:h.a,controlId:"password",onChange:function(e){g(e.target.value)},children:[Object(r.jsx)(f.a.Label,{column:!0,md:4,children:"Password"}),Object(r.jsx)(O.a,{md:8,children:Object(r.jsx)(f.a.Control,{type:"password",placeholder:"Password"})})]}),Object(r.jsx)(f.a.Group,{as:h.a,children:Object(r.jsx)(O.a,{md:{span:10,offset:4},children:Object(r.jsx)(x.a,{type:"submit",children:"Register"})})}),Object(r.jsx)(r.Fragment,{children:"Have an account? "}),Object(r.jsx)(o.b,{to:"/",children:" Back to Login"})]})]})})]})})},q=n(80),L="/api/quotes",A=null,G=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(L);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(L,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D={setToken:function(e){console.log("new token: ",e),A="bearer ".concat(e)},getAll:G,create:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new Object: ",t),n={headers:{Authorization:A}},e.next=4,v.a.post(L,t,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(L,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),get:F},E=function(e){var t=e.quote,n=Object(a.useState)(0),c=Object(b.a)(n,2),s=c[0],o=c[1],u=Object(a.useState)(""),i=Object(b.a)(u,2),d=i[0],p=i[1];Object(a.useEffect)((function(){C.get(t.user).then((function(e){p(e.username)}))}),[]),D.get(t.id).then((function(e){o(e.vote)}));var f=function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={vote:s+1},e.next=3,D.update(t.id,r).then((function(e){console.log("vote success")}));case 3:o(s+1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(q.a,{className:"jumbotron",children:[Object(r.jsxs)("div",{className:"bg-overlay animated",children:[Object(r.jsx)("p",{children:t.content}),Object(r.jsx)("h3",{className:"text-right",children:t.author})]}),Object(r.jsxs)(h.a,{children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(x.a,{onClick:f,children:Object(r.jsx)("i",{className:"fa fa-thumbs-up thumbs-up-button",children:" "+s})})}),Object(r.jsx)(O.a,{className:"text-right",children:Object(r.jsxs)("i",{className:"quote-user-postdate",children:["Posted by ",Object(r.jsx)("b",{children:d})," on ",t.date.substring(0,10)]})})]})]})},T=function(e){var t=e.quotes,n=e.filterByContent,a=t.filter(n);return Object(r.jsx)("div",{children:a.map((function(e,t){return Object(r.jsx)(E,{quote:e},t)}))})},B={backgroundColor:"#ebc1b7",minHeight:"940px"},U={textAlign:"center",display:"flex"},P={margin:"5% 0% 5% 0%"},J=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),o=Object(b.a)(s,2),i=o[0],p=o[1],m=Object(a.useState)(""),g=Object(b.a)(m,2),v=g[0],w=g[1],y=Object(a.useState)(!1),k=Object(b.a)(y,2),C=k[0],S=k[1],I=Object(a.useState)(""),L=Object(b.a)(I,2),A=L[0],G=L[1],F=Object(a.useState)(null),E=Object(b.a)(F,2),J=(E[0],E[1]),H=Object(a.useState)(null),R=Object(b.a)(H,2),z=R[0],M=R[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);J(t),D.setToken(t.token)}}),[]),Object(a.useEffect)((function(){D.getAll().then((function(e){c(e)}))}),[]);var Q=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll().then((function(e){n=e}));case 2:n.sort((function(e,t){return t.vote-e.vote})),c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll().then((function(e){n=e}));case 2:n.sort((function(e,t){return t.content.length-e.content.length})),c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll().then((function(e){n=e}));case 2:n.sort((function(e,t){return e.content.length-t.content.length})),c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll().then((function(e){n=e}));case 2:n.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={content:i,author:v,vote:0},e.prev=2,e.next=5,D.create(r).then((function(e){console.log("create new quote success!"),c(n.concat(e))}));case 5:p(""),w(""),document.getElementById("create-quote-form").reset(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),M("Oh snap, you cannot post a blank quote!"),setTimeout((function(){M(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return C?Object(r.jsx)(u.b,{children:Object(r.jsx)(u.a,{to:"/"})}):Object(r.jsx)(d.a,{style:B,fluid:!0,children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(O.a,{style:U,md:3,className:"row justify-content-md-center",children:Object(r.jsxs)("h1",{className:"main-page-side-text",children:["Have ",Object(r.jsx)("br",{})," a quotes ",Object(r.jsx)("br",{}),"that you like?"]})}),Object(r.jsxs)(O.a,{style:P,md:6,children:[Object(r.jsx)(h.a,{className:"justify-content-md-center",children:Object(r.jsx)("h1",{className:"display-2",children:" Quotes"})}),Object(r.jsx)(h.a,{as:O.a,children:Object(r.jsxs)(O.a,{style:{margin:"10%"},children:[Object(r.jsx)(f.a.Group,{controlId:"search-bar",onChange:function(e){return G(e.target.value)},children:Object(r.jsx)(f.a.Control,{type:"text",placeholder:"Search for a quote.."})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(x.a,{variant:"primary",onClick:Q,children:"Most Votes"})," ",Object(r.jsx)(x.a,{variant:"secondary",onClick:K,children:"Most Recent"})," ",Object(r.jsx)(x.a,{variant:"success",onClick:Y,children:"Longest"})," ",Object(r.jsx)(x.a,{variant:"warning",onClick:V,children:"Shortest"})]}),Object(r.jsx)("div",{children:Object(r.jsx)("br",{})}),Object(r.jsx)(T,{quotes:n,filterByContent:function(e){return-1!==e.content.toLowerCase().indexOf(A)}}),Object(r.jsxs)(q.a,{children:[Object(r.jsx)(N,{message:z}),Object(r.jsxs)(f.a,{id:"create-quote-form",onSubmit:W,children:[Object(r.jsxs)(f.a.Group,{as:h.a,controlId:"quotes-text",onChange:function(e){return p(e.target.value)},children:[Object(r.jsx)(f.a.Label,{column:!0,md:2,children:"Quote"}),Object(r.jsx)(O.a,{md:10,children:Object(r.jsx)(f.a.Control,{as:"textarea",rows:3,placeholder:'e.g. "A problem is a chance for you to do your best."'})})]}),Object(r.jsxs)(f.a.Group,{as:h.a,controlId:"author-text",onChange:function(e){return w(e.target.value)},children:[Object(r.jsx)(f.a.Label,{column:!0,md:2,children:"Author"}),Object(r.jsx)(O.a,{md:10,children:Object(r.jsx)(f.a.Control,{type:"text",placeholder:"e.g. Duke Ellington"})})]}),Object(r.jsx)(f.a.Group,{as:h.a,children:Object(r.jsx)(O.a,{md:{span:3,offset:10},children:Object(r.jsx)(x.a,{type:"submit",children:"Save"})})})]})]})]})})]}),Object(r.jsxs)(O.a,{style:U,md:3,className:"row justify-content-md-center",children:[Object(r.jsx)("p",{className:"logout-button",children:Object(r.jsx)(x.a,{type:"submit",onClick:function(e){window.localStorage.removeItem("loggedInUser"),S(!0)},children:"Logout"})}),Object(r.jsxs)("h1",{className:"main-page-side-text",children:["Don't ",Object(r.jsx)("br",{})," forget to give ",Object(r.jsx)("br",{})," the authors the credits"," ",Object(r.jsx)("br",{})," they deserve!"]})]})]})})},H=n.p+"static/media/login.18d5d104.png",R={login:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(b.a)(s,2),m=i[0],g=i[1],v=Object(a.useState)(!1),w=Object(b.a)(v,2),y=w[0],k=w[1],C=Object(a.useState)(null),S=Object(b.a)(C,2),I=S[0],q=S[1],L=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,R.login({username:n,password:m});case 4:r=e.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(r)),c(""),g(""),D.setToken(r.token),document.getElementById("login-form").reset(),console.log("logged in"),k(!0),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("login fail, wrong credentials"),q("Oh no, wrong credentials!"),setTimeout((function(){q(null)}),5e3),k(!1);case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return y?Object(r.jsx)(u.b,{exact:!0,path:"/",children:Object(r.jsx)(u.a,{to:"/main"})}):Object(r.jsx)(d.a,{style:{backgroundColor:"#F0F8FF"},fluid:!0,children:Object(r.jsxs)(h.a,{className:"align-items-center",children:[Object(r.jsx)(O.a,{md:4,children:Object(r.jsxs)(h.a,{style:{padding:"30%"},children:[Object(r.jsx)(N,{message:I}),Object(r.jsx)("h2",{children:"Login"}),Object(r.jsxs)(f.a,{id:"login-form",onSubmit:L,children:[Object(r.jsxs)(f.a.Group,{as:h.a,controlId:"userName",onChange:function(e){c(e.target.value)},children:[Object(r.jsx)(f.a.Label,{column:!0,md:4,children:"Username"}),Object(r.jsx)(O.a,{md:8,children:Object(r.jsx)(f.a.Control,{type:"text",placeholder:"Username"})})]}),Object(r.jsxs)(f.a.Group,{as:h.a,controlId:"password",onChange:function(e){g(e.target.value)},children:[Object(r.jsx)(f.a.Label,{column:!0,md:4,children:"Password"}),Object(r.jsx)(O.a,{md:8,children:Object(r.jsx)(f.a.Control,{type:"password",placeholder:"Password"})})]}),Object(r.jsx)(f.a.Group,{as:h.a,children:Object(r.jsx)(O.a,{md:{span:10,offset:4},children:Object(r.jsx)(x.a,{type:"submit",children:"Login"})})})]}),"Don't have an account?",Object(r.jsx)(o.b,{to:"/registration",children:"Create an account"})]})}),Object(r.jsx)(O.a,{md:8,className:"left-col",children:Object(r.jsx)(p.a,{className:"background-img",src:H})})]})})},M=(n(72),n(73),function(){return Object(r.jsx)(o.a,{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:"/registration",children:Object(r.jsx)(I,{})}),Object(r.jsx)(u.b,{path:"/main",children:Object(r.jsx)(J,{})}),Object(r.jsx)(u.b,{path:"/",children:Object(r.jsx)(z,{})})]})})});s.a.render(Object(r.jsx)(M,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.aede3e28.chunk.js.map